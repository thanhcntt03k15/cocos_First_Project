{"version":3,"sources":["assets\\Scripts\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property\r\n    jumpHeight: number = 150;\r\n\r\n    @property\r\n    jumpDuration: number = 0.3;\r\n\r\n    @property\r\n    maxMoveSpeed: number = 400;\r\n\r\n    @property\r\n    accel: number = 1000;\r\n\r\n    accLeft: boolean;\r\n    accRight: boolean;\r\n\r\n    @property  \r\n    xSpeed: number = 0;\r\n\r\n    @property(cc.AudioClip)\r\n    jumpAudio: cc.AudioClip ;\r\n\r\n    onLoad(){\r\n\r\n        // Khởi tạo hành động nhảy\r\n        var jumpAction = this.runJumpAction();\r\n        cc.tween(this.node).then(jumpAction).start();\r\n\r\n        // Công tắc hướng gia tốc\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n\r\n        // Vận tốc ngang hiện tại của nhân vậy chính\r\n        this.xSpeed = 0;\r\n\r\n        // Khởi tạo đầu vào từ bàn phím\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onDestroy(): void {\r\n        // Hủy theo dõi dữ liệu nhập bằng bàn phím\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update(dt: number): void {\r\n        // Cập nhật tốc độ từng khung hình theo hướng gia tốc hiện tại.\r\n        if(this.accLeft){\r\n            this.xSpeed -= this.accel * dt;\r\n        }\r\n        else if (this.accRight){\r\n            this.xSpeed += this.accel * dt;\r\n        }\r\n        // Hạn chế tốc độ di chuyển của nhân vật ở tốc độ tối đa\r\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed){\r\n            // Nếu tốc độ đạt đến giới hạn, sử dụng tốc độ tối đa cho chính nó\r\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed/ Math.abs(this.xSpeed);\r\n        } \r\n        // Cập nhật  vị trí của nhân vật chính theo tốc độ hiện tại\r\n        this.node.x += this.xSpeed * dt;\r\n    }\r\n\r\n    // update (dt) {}\r\n    runJumpAction(){\r\n        // Nhảy lên\r\n        var jumpUp = cc.tween().by(this.jumpDuration, {y: this.jumpHeight}, {easing: 'sinOut'});\r\n\r\n        // Nhảy xuống\r\n        var jumpDown = cc.tween().by(this.jumpDuration, {y: -this.jumpHeight}, {easing: 'sinIn'});\r\n\r\n        // Tạo easing và thực hiện hành động\r\n        var tween = cc.tween()\r\n                            // Thực hiện hành động theo thứ tự jumpUp, jumpDown\r\n                            .sequence(jumpUp, jumpDown)\r\n                            // Thêm hàm 'playJumpSound()' được xác định khi hành động kết thúc\r\n                            .call(this.playJumpSound, this);\r\n\r\n        \r\n        // Lặp lại hành động\r\n        return cc.tween().repeatForever(tween);\r\n\r\n    }\r\n    playJumpSound(){\r\n        // Gọi công cụ âm thanh để phát âm thanh\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    }\r\n\r\n    onKeyDown(event){\r\n        \r\n        // Cài một nút khi chạy hàm\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event){\r\n\r\n        // Tắt nút khi chạy hàm\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}